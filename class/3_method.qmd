---
title: 3 データの種類とまとめ方
---

# データを用いた調査

## 調査の目的

現状を知る

問いを明らかにする、特に因果関係を見つけるようなことを目指して調査が行われます。

## 調査の方法

-   調査の方法にはさまざまなものがある。
    -   実験
    -   アーカイバルデータ分析
    -   アンケートデータ分分析
    -   観察データ分析
    -   インタビューデータ分析
-   この授業では、統計的な処理のできる定量データを扱います。
    -   ただし、文字データはテキストマイニングなどの方法で定量データ化が可能ですが本授業では扱いません。

### 実験データ

-   マウスを使った医学・薬学の実験
-   大規模観測装置を使った天文学・物理学実験
-   学生等を参加者とした心理学や経済学，経営学の実験
-   実際の企業や政府を取り巻く制度や法律の変化を使った自然実験
-   実際の企業や政府の行動を変化させて試してみる現場順実験

### アーカイバルデータ

-   企業の公表財務データ
-   社内の人事・会計データ
-   プロ野球選手の成績・年俸データ
-   国勢調査や各種政府統計データ
-   文章データ

### アンケート（質問票）データ

-   自分でアンケートを設計して得たデータ

### 観察データ

-   定量的観察データ（交通量調査など）
-   定性的観察データ（現場での参与観察）

### インタビューデータ

-   当事者に直接質問を投げかける（構造化インタビュー・半構造化インタビュー）
-   テーマについて自由に話してもらう（フォーカスグループインタビュー）

### 調査方法の選択

-   調査の際には
    -   調査の目的に合っているか
    -   より厳密な証拠が得られる方法はないか
-   といった基準で選択することが必要。特に後者についてお話しします

EBM (Evidence Based Medicine: 根拠に基づいた医療)

-   医学研究での考え方、それぞれの調査方法から得られる証拠はその確からしさ、根拠の強さに違いがあることを前提に、証拠のレベルを設定、より高いレベルの根拠をもとに医療行為の方法を決めよう、と言うもの
-   この考え方は、EBMgt（Evidence Based Management：根拠に基づいたマネジメント）として経営学に応用されたり、EBPM (Evidence Based Policy Making: 根拠に基づく政策決定)として政策決定に応用されたりしています。
-   この考え方に従うと、もし可能ならばより高いエビデンスレベルが得られる方法を選択することが望ましくなります。

# データ解析

得られたデータは，解析され，色々な役に立てられます。 大きく分けて，予測と発見があると言われています。

## 予測

-   天気予報
-   株価予測
-   販売予想

### 予測の方法

1.  なんらかの法則を見出して，それが続くと仮定して未来を予測する
2.  データを使って予測する

## 発見

### グルーピング・クラスタリング

多くのデータをいくつかのグループに分ける。

-   性別ごとに分ける
-   年代ごとに分ける
-   国籍ごとに分ける
-   業界ごとに分ける

あらかじめ分け方が決まっていない場合には，データ自身にグループを作成させるクラスタリングを行う

### 相関分析

2種類のデータの関係の強弱を相関という。

身長と体重には相関があるが，身長と年収には相関はない

```{r}
#| message: false
#| warning: false
#パッケージの読み込み
library(tidyverse) #様々な機能の統合パッケージ
library(magrittr) #コードを見やすくする
library(stargazer)
library(gtsummary)
```

# データの種類

データはその性質に応じて分類が可能です。

| 種類     | 尺度     | 説明                                                                                                                        | 例                                   |
|----------|----------|-----------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
| 質的変数 | 名義尺度 | 性質を分類するために使われる（男 = 0, 女 = 1，のように性質に数値を割り当てる）。数値に意味はない。                          | 性別，学籍番号                       |
| 質的変数 | 順序尺度 | 並び順に意味がある尺度。大小関係はあるが，計算はできない。                                                                  | 人気ランキング，成績（秀優良可不可） |
| 量的変数 | 間隔尺度 | 大小関係に加えて間隔にも意味がある。計算可能だが，比には意味がない（西暦1000年の2倍は西暦2000年，という計算に意味はある？） | 西暦・温度                           |
| 量的変数 | 比例尺度 | 間隔に加えて比率にも意味がある。                                                                                            | 身長・体重・価格・売上高・利益       |

-   データがそれぞれどの種類の尺度なのかによってまとめ方や分析での使い方が変わります。

    -   例えば，名義尺度である学籍番号の平均値を計算することは意味がありません。

## 課題

以下のデータの各列はそれぞれどの尺度ですか。ただし

-   `id`: 学籍番号
-   `class`: クラス
-   `gender`: 性別
-   `test`: テストの点
-   `hometown`: 出身地

```{r}
#| message: false
data3 <- read_csv("data/data3.csv")
data3
```

## Rが理解しているデータの種類

データの種類にはいくつかあるということでしたが，rにもそれに（完全にではないけれど）対応したデータの種類があります。

-   numeric (`num`数値型)：数値データ
-   character (`chr`文字列型)：文字データ
-   factor (`fctr`因子型)：カテゴリデータ
-   logical (`lgl`論理値型)：trueかfalseの2択データ

エクセルやcsvファイルを読み込んだとき，Rは自動でこれらのうちのどれかとして読み取ります。どの種類として読み込まれたかは，画面右上のEnvironmentタブにあるDataウインドウから確認可能です。また，単に`データ名`を実行するもしくは`str(データ名)`でも確認可能です

```{r}
str(data3)
```

初期状態では，genderとhometownが`chr`（文字列），それ以外が`num`（数値）になっています。しかし，例えばidやclassは名義尺度であるべきです。

後で使うclassをカテゴリデータに変えてみます。使うコマンドは`as.factor(変えたい変数)`です。

```{r}
data3 %<>%
  mutate(class = as.factor(class))
```

1行目は，変えたいデータです。以下のように書いても同じです

`data3 <- data3 |>`

2行目の`mutate(新しい変数名 = 指示)` は，新しい変数（列）を足すコマンドです。現在ある列名と同じものを指定すると上書きされます。今回は，classという数値変数をカテゴリ変数に変えたものを，元と同じclassという名前で作成（上書き）しています。

文字列については，分析の際には自動的にカテゴリ変数として扱われるので，特段の変更処理は必要ありません。
